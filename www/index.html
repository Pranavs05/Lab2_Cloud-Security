<html>
<head>
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_parameter_name" th:content="${_csrf.parameterName}"/>
    <meta http-equiv="Cache-control" content="no-cache">
</head>
<title> One-Page App</title>
<style>
	h1 {
		font-size: 4em;
		color: #000080;
		font-weight: bold;
	}
	h2 {
		font-size: 3em;
		color: #4a71a3;
		font-weight: bold;
	}

	
</style>
<script>
 function reqJSON(method, path, data) {
    return new Promise((resolve, reject) => {
      const xhr = new XMLHttpRequest();
      xhr.open(method, path, true);
      xhr.setRequestHeader('Content-type','application/json');
      xhr.responseType = 'json';
      function resp(){
		return {
			status: xhr.status,
			data: xhr.response,
		};
      };;
      xhr.onload = () => {
        if (xhr.status >= 200 && xhr.status < 300) {
          resolve(resp());
        } else {
          console.error('xhr with error',xhr);
	  reject(resp());
        }
      };
      xhr.onerror = () => {
        console.error('xhr with error:',xhr);
	reject(resp());
      };
      xhr.send(JSON.stringify(data));
    });
  }

   async function getl() {
        console.log('in getl')
	let {data} = await reqJSON("GET","/"); 
    }
  
   async function getLogin() {
        console.log('into get login')
	let {data} = await reqJSON("GET","/www/login.html");
   }

  async function postlogin() {
        console.log('post login ')
	  await reqJSON("POST","/login",{
	username: 'ppp',
	pass : 'vvv',
   });  
   }



  

  function createCookie(cookieName,cookieValue,daysToExpire)
        {
          var date = new Date();
          date.setTime(date.getTime()+ (60*60*1000));  //(daysToExpire*24*60*60*1000));
          document.cookie = cookieName + "=" + cookieValue + "; expires=" + date.toGMTString();
        }

     document.addEventListener('DOMContentLoaded', () => {
     document.getElementById('create').addEventListener('click',getl );
    console.log('request')
    
    //setInterval(displayTimers ,1000);
  });


</script>
<body>
    <h1>Welcome index</h1>	
    
    <form onsubmit="return false">
    Event Name: <input type="text" id="nameval">
    Date: <input type="text" id="dateval">
    </form>
    <button id = "create">Click </button>
    <p>COUNTDOWN ------</p>
    <div id="events"></div> 
</body>
</html>
